<!DOCTYPE html>
<html lang="en-GB">
  <head>
    <meta charset="utf-8" />
    <link
      href="https://fonts.googleapis.com/css?family=Material+Icons&display=block"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
    />
  </head>

  <body>
    <sample-element></sample-element>
    <script type="module">
      import { LitElement, html } from "lit";
      import { get, readable, writable } from "svelte/store";
      import { DynamicStore } from "../dist";

      let store = writable(0);

      setInterval(() => {
        store.update((count) => count + 1);
      }, 1000);

      let store2 = readable(5000);

      class SampleElement extends LitElement {
        static get properties() {
          return {
            loaded: {
              type: Boolean,
            },
          };
        }

        constructor() {
          super();
          this.store = new DynamicStore(this, () =>
            !this.loaded ? store : store2
          );

          setTimeout(() => {
            this.loaded = true;
          }, 2000);
        }

        render() {
          return html`Count: ${this.store.value}`;
        }
      }

      customElements.define("sample-element", SampleElement);
    </script>
  </body>
</html>
